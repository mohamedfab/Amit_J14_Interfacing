 /**********************************************************************************************************************
 *  File		: Adc.c
 *	Module		: ADC
 *	Target		: ATMEGA32
 *	Author		: mFawzi
 *  Description	:
 *
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  INCLUDES
 *********************************************************************************************************************/
#include "Adc.h"
/**********************************************************************************************************************
*  LOCAL MACROS CONSTANT\FUNCTION
*********************************************************************************************************************/

/**********************************************************************************************************************
 *  LOCAL DATA
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  GLOBAL DATA
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  LOCAL FUNCTION PROTOTYPES
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  LOCAL FUNCTIONS
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  GLOBAL FUNCTIONS
 *********************************************************************************************************************/
/******************************************************************************
* \Syntax          : void adcInit(void)
* \Description     : Describe this service
*
* \Sync\Async      : Synchronous
* \Reentrancy      : Non Reentrant
* \Parameters (in) : None
* \Return value:   : None
*******************************************************************************/
void adcInit(void)
{
	ADC_ADMUX_REG|=(AVCC5V_REF<<6);
	ADC_ADCSRA_REG=(ADC_ENABLE)|(ADCPS_128);
}
/******************************************************************************
* \Syntax          : u16 adcRead(adcChanel_t chnl)
* \Description     : Describe this service
*
* \Sync\Async      : Synchronous
* \Reentrancy      : Non Reentrant
* \Parameters (in) : chnl	-	ADC channel
* \Return value:   : ADC conversion result
*******************************************************************************/
u16 adcRead(adcChanel_t chnl)
{
    u16 result;
    ADC_ADMUX_REG|=chnl;
    ADC_ADCSRA_REG|=(ADC_START_CONVERSION);
 	  while(!(CHECK_BIT(ADC_ADCSRA_REG,ADIF_BIT_NO)))
 		  {
 		  	  /*	Do Nothing	*/
 		  	  	  ;
 		  }
 	 ADC_ADCSRA_REG|=(1<<ADIF_BIT_NO);
    result=(ADC_ADCL_REG|(ADC_ADCH_REG<<8));
 	return result;
}
/**********************************************************************************************************************
 *  END OF FILE: Adc.c
 *********************************************************************************************************************/
